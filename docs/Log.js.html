<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: Log.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: Log.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import TypeOf from "./TypeOf"

/**
 * Convienience methods for tracing/logging method behavior.  This is mixed-into BrutalJSBase so should
 * be available to all your classes.  This ultimately wraps the Performance API for UserPerformance.
 *
 * The primary way to use this is to call methodStart, then event any number of times, and finally methodDone.  These methods
 * all accept details objects and these are compounded, so that methodDone will include ALL details recorded during the method.
 * This allows you to build up context about what happened inside the method.
 *
 * @mixin
 * @see BrutalJSBase
 * @see {external:Performance}
 */
const LogMixin = {

  /** Used to log the start of a method for later measurement of the method's duration.
   *
   * @param {String} methodName - name of the method that just got called
   * @param {Object} details - passed to performance.mark
   */
  methodStart(methodName,details) {
    this.event(`${methodName}#called`,details)
  },

  /** Used to log the end of a method. You must have called methodStart. This will
   * record an event and a measurement
   *
   * @param {String} methodName - name of the method that just got called
   * @param {Object} details - passed to performance.mark and performance.measure
   *
   */
  methodDone(methodName,details) {
    this.event(`${methodName}#completed`,details)
    this.measure(methodName,`${methodName}#called`,`${methodName}#completed`)
  },
  /**
   * Record an event via performance.mark
   *
   * @param {String} eventName - name of the event - can be anything
   * @param {Object} details - passed to performance.mark and performance.measure. Added to the default details this mixin stores.
   */
  event(eventName,details) {
    details = {...this.__defaultDetails(), ...details }
    performance.mark(this._name(eventName),{ detail: details })
    this.__logMixinDetails = {...this.__logMixinDetails, ...details}
  },
  /**
   * Record a measurement with performance.measure
   *
   * @param {String} measurementName - name of the measurement. Can be anything.
   * @param {String} start - the start mark name, as used in the Performance API
   * @param {String} end - the end mark name, as used in the Performance API
   */
  measure(measurementName,start,end) {
    if (!start) {
      throw `You forgot to add start &amp; end to measure(${measurementName})`
    }
    else if (!end) {
      throw `You forgot to add end to measure(${measurementName})`
    }

    performance.measure(this._name(measurementName),
      {
        start: this._name(start),
        end: this._name(end),
        detail: this.__logMixinDetails 
      }
    )
  },
  _name(eventName) {
    if ( (this.constructor) &amp;&amp; (this.constructor.logContext) ) {
      return `${this.constructor.logContext}.${this.__className()}.${eventName}`
    }
    else {
      return `${this.__className()}.${eventName}`
    }
  },
  __defaultDetails() {
    const details = {
      logContext: this.constructor.logContext || "UNKNOWN",
      className: this.__className(),
    }
    if (window &amp;&amp; window.location) {
      details[`window.location.pathname`] = window.location.pathname
    }
    return details
  },
  __className() {
    return TypeOf.asString(this)
  },

  /** Mixes this into any class
   * @param {Class} klass - a Class
   */
  mixin(klass) {
    Object.assign(klass.prototype,LogMixin)
  }
}
export default LogMixin
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Externals</h3><ul><li><a href="external-Element.html">Element</a></li><li><a href="external-Node.html">Node</a></li><li><a href="external-Performance.html">Performance</a></li><li><a href="external-Promise.html">Promise</a></li></ul><h3>Classes</h3><ul><li><a href="Animator.html">Animator</a></li><li><a href="AnimatorPreferences.html">AnimatorPreferences</a></li><li><a href="Body.html">Body</a></li><li><a href="BrutalJSBase.html">BrutalJSBase</a></li><li><a href="CalendarDate.html">CalendarDate</a></li><li><a href="Component.html">Component</a></li><li><a href="Env.html">Env</a></li><li><a href="EventAlreadyDefined.html">EventAlreadyDefined</a></li><li><a href="EventManager.html">EventManager</a></li><li><a href="HumanizedString.html">HumanizedString</a></li><li><a href="LogViewer.html">LogViewer</a></li><li><a href="Runtime.html">Runtime</a></li><li><a href="Template.html">Template</a></li><li><a href="TypeOf.html">TypeOf</a></li><li><a href="WrapsElement.html">WrapsElement</a></li></ul><h3>Mixins</h3><ul><li><a href="LogMixin.html">LogMixin</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Mon Sep 04 2023 19:22:13 GMT+0000 (Coordinated Universal Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
